<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="{{ '/assets/favicon.ico' | relative_url }}">

  <!-- Preconnect to CDNs for faster loading -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://kit.fontawesome.com" crossorigin>
  <link rel="dns-prefetch" href="https://ka-f.fontawesome.com">

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css">

  <!-- Bootstrap CSS - Non-blocking load with media print trick -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous" media="print" onload="this.media='all'">
  
  <!-- Bootstrap Icons - Deferred -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" media="print" onload="this.media='all'">

  <!-- Fork Awesome - Deferred -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.1.7/css/fork-awesome.min.css" integrity="sha256-gsmEoJAws/Kd3CjuOQzLie5Q3yshhvmo7YNtBG7aaEY=" crossorigin="anonymous" media="print" onload="this.media='all'">

  <!-- Highlight JS -->
  {% if page.usehighlight %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/atom-one-light.min.css" media="print" onload="this.media='all'">
  {% endif %}

  <!-- Mathjax support -->
  {% if page.usemathjax %}
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } }
      });
    </script>
    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  {% endif %}

  <!-- SEO -->
  <title>
    {% if page.title %}
      {{ page.title }}
    {% else %}
      {{ site.title }}
    {% endif %}
  </title>
  <link rel="sitemap" type="application/xml" title="sitemap" href="{{ site.baseurl }}/sitemap.xml" />
  {% seo title=false %}

  <!-- Deferred JavaScript - Load at end of body for better performance -->
  <script>
    // Fallback for CSS loaded with media="print"
    document.addEventListener('DOMContentLoaded', function() {
      var links = document.querySelectorAll('link[media="print"]');
      links.forEach(function(link) {
        if (link.media === 'print') link.media = 'all';
      });
    });
  </script>
</head>

<!-- Move scripts to before closing body tag for better performance -->
<script>
  window.addEventListener('load', function() {
    // Bootstrap Bundle - Deferred
    var bootstrapScript = document.createElement('script');
    bootstrapScript.src = 'https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js';
    bootstrapScript.integrity = 'sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf';
    bootstrapScript.crossOrigin = 'anonymous';
    document.body.appendChild(bootstrapScript);

    // FontAwesome - Deferred
    var faScript = document.createElement('script');
    faScript.src = 'https://kit.fontawesome.com/22ab6dd597.js';
    faScript.crossOrigin = 'anonymous';
    document.body.appendChild(faScript);

    {% if page.usehighlight %}
    // Highlight.js - Deferred
    var hlScript = document.createElement('script');
    hlScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js';
    hlScript.onload = function() { hljs.highlightAll(); };
    document.body.appendChild(hlScript);
    {% endif %}

    {% if page.usechartjs %}
    // Chart.js - Deferred
    var chartScript = document.createElement('script');
    chartScript.src = 'https://cdn.jsdelivr.net/npm/chart.js';
    document.body.appendChild(chartScript);
    {% endif %}
  });
</script>